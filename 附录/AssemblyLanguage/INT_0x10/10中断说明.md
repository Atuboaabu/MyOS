# INT 10h BIOS 中断服务功能文档

## 概述
`INT 10h` 是 BIOS 提供的显示服务中断，用于直接控制显示适配器，支持设置显示模式、光标操作、字符输出、滚屏等操作。该中断涵盖文本模式和图形模式功能，适用于 CGA、EGA、VGA 等显示适配器。

以下是 `INT 10h` 功能号的详细列表及用法说明。

---

## 功能号详细列表

| 功能号 (AH) | 功能描述                       | 说明                                                                 |
|-------------|--------------------------------|----------------------------------------------------------------------|
| 00h         | 设置显示模式                   | 切换显示模式，支持文本模式和图形模式。                               |
| 01h         | 设置光标形状                   | 自定义光标的起始和结束扫描线，改变光标大小和形状。                   |
| 02h         | 光标定位                       | 将光标移动到屏幕的指定位置。                                         |
| 03h         | 读取光标位置及形状             | 获取当前光标的位置和形状参数。                                       |
| 04h         | 读取光盘驱动器状态             | 检测显示设备连接状态（较少使用）。                                   |
| 05h         | 设置活动显示页                 | 指定当前活动的显示页。                                               |
| 06h         | 滚屏（向上）                   | 滚动屏幕指定区域内容，并以指定颜色填充空白行。                       |
| 07h         | 滚屏（向下）                   | 滚动屏幕指定区域内容（与 06h 类似）。                                |
| 08h         | 读取光标位置字符及属性         | 获取光标位置的字符和颜色属性值。                                     |
| 09h         | 在光标位置显示字符及属性       | 显示带颜色属性的字符，支持重复显示多次。                             |
| 0Ah         | 在光标位置显示字符串           | 显示字符串，可以选择是否更新光标位置。                               |
| 0Bh         | 设置背景和前景颜色             | 改变彩色文本模式下的背景和前景颜色（仅限某些模式）。                 |
| 0Ch         | 在图形模式下显示像素点         | 设置某个像素点的颜色值（仅适用于图形模式）。                         |
| 0Dh         | 读取像素点颜色                 | 获取指定位置像素的颜色值。                                           |
| 0Eh         | 在光标位置显示字符             | 显示字符（不带颜色属性），自动更新光标位置。                         |
| 0Fh         | 读取当前显示模式               | 获取当前显示模式、页面数量及光标列数。                               |
| 10h         | 加载字体                       | 加载用户定义的字符集（通常用于文本模式）。                           |
| 11h         | 加载字符生成表                 | 加载图形模式下的字符生成表（ROM 字符）。                             |
| 12h         | 指定字体大小                   | 设置文本模式下的字体大小（如 8x8、8x16 等）。                         |
| 13h         | 写字符串到显示缓冲区           | 直接将字符串写入显示缓冲区（通常用于快速更新屏幕内容）。             |
| 1Ah         | 获取显示设备信息               | 检测当前显示设备及模式（VGA 附加功能）。                             |
| 1Bh         | 控制视频 DAC                   | 直接控制显示适配器的数字模拟转换器（常用于调节调色板颜色）。         |
| 1Ch         | VGA 保存/恢复状态              | 保存或恢复 VGA 的当前寄存器状态（常用于多任务切换时）。              |
| 4Fh         | VESA 扩展功能                  | 提供 VESA 标准下的扩展功能（如高分辨率支持，具体由 VESA BIOS 支持）。 |

---

## 功能号使用详解

### 1. 设置显示模式 (AH = 00h)
设置显示模式以切换文本或图形模式。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：00h       |
| AL     | 模式号            |

**常用显示模式：**
| 模式号 (AL) | 模式描述                     | 列数 × 行数 | 颜色数 |
|-------------|------------------------------|-------------|--------|
| 00h         | 文本模式，40列，16色，8x8字体 | 40×25       | 16     |
| 03h         | 文本模式，80列，16色，8x8字体 | 80×25       | 16     |
| 13h         | 图形模式，320×200像素，256色 | 320×200     | 256    |

**示例代码：**
```asm
mov ah, 00h    ; 设置显示模式功能号
mov al, 03h    ; 选择80×25文本模式
int 10h        ; 调用中断
```

---

### 2. 设置光标形状 (AH = 01h)
设置光标的起始和结束扫描线。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：01h       |
| CH     | 起始扫描线        |
| CL     | 结束扫描线        |

**示例代码：**
```asm
mov ah, 01h    ; 设置光标形状功能号
mov ch, 0      ; 起始扫描线
mov cl, 15h    ; 结束扫描线
int 10h        ; 调用中断
```

---

### 3. 光标定位 (AH = 02h)
将光标移动到指定位置。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：02h       |
| BH     | 页号              |
| DH     | 行号              |
| DL     | 列号              |

**示例代码：**
```asm
mov ah, 02h    ; 光标定位功能号
mov bh, 00h    ; 使用第0页
mov dh, 10h    ; 第16行
mov dl, 20h    ; 第32列
int 10h        ; 调用中断
```

---

### 4. 读取光标位置及形状 (AH = 03h)
获取当前光标的位置和形状。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：03h       |
| BH     | 页号              |

**输出参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| CH     | 起始扫描线        |
| CL     | 结束扫描线        |
| DH     | 行号              |
| DL     | 列号              |

**示例代码：**
```asm
mov ah, 03h    ; 读取光标位置及形状功能号
mov bh, 00h    ; 使用第0页
int 10h        ; 调用中断
; 结果存储在CH, CL, DH, DL中
```

---

### 5. 显示字符 (AH = 0Eh)
在光标位置显示字符，并自动向前移动光标。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：0Eh       |
| AL     | ASCII 字符代码    |
| BH     | 页号              |

**示例代码：**
```asm
mov ah, 0Eh    ; 显示字符功能号
mov al, 'A'    ; 显示字符 'A'
int 10h        ; 调用中断
```

---

### 6. 在图形模式下显示像素点 (AH = 0Ch)
在图形模式下的指定位置绘制一个像素点。

**输入参数：**
| 寄存器 | 说明              |
|--------|-------------------|
| AH     | 功能号：0Ch       |
| AL     | 像素点颜色值      |
| CX     | 列坐标            |
| DX     | 行坐标            |

**示例代码：**
```asm
mov ah, 0Ch    ; 显示像素点功能号
mov al, 4      ; 颜色值（红色）
mov cx, 100    ; 像素点的X坐标
mov dx, 100    ; 像素点的Y坐标
int 10h        ; 调用中断
```

---

## 总结
`INT 10h` 提供了丰富的显示控制功能，涵盖文本模式和图形模式的操作，尤其在 DOS 程序和裸机程序开发中广泛使用。随着现代操作系统的普及，高级显示库和图形 API 替代了这些低级中断调用，但它仍然是学习计算机底层显示控制的重要内容。

